<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="infor">
	<select id="dataCountInformation" parameterType="map" resultType="Integer">
		SELECT COUNT(*)
		from orderinfo o
		JOIN member1 m ON o.memberIdx = m.memberIdx
		JOIN order_detail od ON o.orderId = od.orderId
		WHERE od.productNum=#{productNum}

	</select>
	
	<select id="listInformation" parameterType="map" resultType="com.sp.app.selltab.infor.Information">
		SELECT d.orderId, userId, userName, TOTAL_PRICE, count
		from orderinfo o
		JOIN member1 m ON o.memberIdx = m.memberIdx
		JOIN order_detail od ON o.orderId = od.orderId
		WHERE od.productNum=#{productNum}
		ORDER BY order_date DESC
		OFFSET #{offset} ROWS FETCH FIRST #{rows} ROWS ONLY
	</select>
</mapper>